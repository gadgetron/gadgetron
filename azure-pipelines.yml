# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool: gadgetron-gpu-nodes

steps:

- script: |
      IMAGE_NAME_CUDA=gadgetron_ubuntu_2004_cuda11_cudnn8
      IMAGE_NAME=gadgetron_ubuntu_2004
      cd docker
      docker build . --file ubuntu_2004_cuda11_cudnn.Dockerfile --tag $IMAGE_NAME_CUDA
      docker build . --file ubuntu_2004.Dockerfile --tag $IMAGE_NAME
  displayName: 'Build docker images'
